{"version":3,"file":"hook-stash.es.js","sources":["../domain/di.ts","../packages/common/useSymbol.ts","../packages/core/di/createComponent.tsx","../packages/core/di/useInjector.ts","../packages/core/signal/watcher.ts","../packages/common/useDestroy.tsx","../packages/core/render/watcher.ts","../packages/core/signal/useSignal.ts","../packages/core/render/render.tsx","../packages/common/useReady.ts","../packages/core/signal/useComputed.ts","../packages/core/signal/useWatchEffect.ts","../packages/common/useRefState.ts","../packages/common/useMounted.ts","../domain/http.ts","../packages/http/useHttp.ts","../packages/http/useHttpClient.ts","../packages/http/usePaging.ts"],"sourcesContent":["import { createContext } from \"react\";\r\n\r\n\r\nexport interface ComponentInjector {\r\n  id: symbol;\r\n  name: string;\r\n  parent: ComponentInjector | null;\r\n  providers: Map<symbol, ComponentProvider>;\r\n};\r\n\r\nexport interface ComponentProvider<T extends object = object> {\r\n  token: symbol;\r\n  value: T;\r\n  origin: ProviderHook<unknown>;\r\n  type: 'hook' | 'constant' | 'component';\r\n  status: 'idle' | 'pending' | 'committed';\r\n}\r\n\r\nexport interface ProviderHook<C> {\r\n  (): C;\r\n  token?: symbol;\r\n}\r\n\r\nexport interface InputProviderDepends {\r\n\r\n}\r\n\r\nexport const SERVICE_CONTEXT = createContext<ComponentInjector | null>(null);\r\nexport const ACTIVE_CACHE: { providers: ComponentInjector['providers'] | null } = { providers: null };","import { useRef } from \"react\";\r\n\r\n/** \r\n * @description 生成一个symbol标识\r\n */\r\nexport function useSymbol () {\r\n  const symbol = useRef(\r\n    Symbol('a unique symbol id for current functional component')\r\n  )\r\n  return symbol.current;\r\n}","import React, { PropsWithChildren } from \"react\";\r\nimport { useContext } from \"react\";\r\nimport { ComponentInjector, ProviderHook, SERVICE_CONTEXT, ACTIVE_CACHE, ComponentProvider } from \"../../../domain/di\";\r\nimport { useSymbol } from \"../../common/useSymbol\";\r\n\r\nexport function createComponent<C = { [prop: string]: any }>(Comp: React.FC<C>, hooks: ProviderHook<unknown>[]) {\r\n  return React.memo((props: PropsWithChildren<C>) => {\r\n    const id = useSymbol();\r\n\r\n    // 获取父级注入器\r\n    const parentInjector = useContext(SERVICE_CONTEXT);\r\n\r\n    // 为当前组件上下文创建注入器\r\n    const injector: ComponentInjector = {\r\n      id,\r\n      name: Comp.name,\r\n      providers: new Map(),\r\n      parent: parentInjector,\r\n    }\r\n\r\n    // 创建注入器providers\r\n    for (let hook of hooks) {\r\n      if (!hook.token) hook.token = Symbol(hook.name);\r\n      const token = hook.token as symbol;\r\n      const provider: ComponentProvider = { token, value: {}, origin: hook, status: 'idle', type: 'hook' };\r\n      injector.providers.set(token, provider);\r\n    }\r\n\r\n    // 将当前组件注入器的providers赋值给ACTIVE_INJECTOR作为临时存储\r\n    ACTIVE_CACHE.providers = injector.providers;\r\n\r\n    /** 解析并执行providers中的hook函数，并将调用结果存入dependsMap与CACHE_MAP */\r\n    ACTIVE_CACHE.providers.forEach(__runProvider);\r\n    // 执行完毕后需要清空临时存储\r\n    ACTIVE_CACHE.providers = null;\r\n\r\n    return (\r\n      <SERVICE_CONTEXT.Provider value={injector}>\r\n        <Comp {...props} />\r\n      </SERVICE_CONTEXT.Provider>\r\n    )\r\n  })\r\n}\r\n\r\nexport const __runProvider = (provider: ComponentProvider) => {\r\n  if (provider.status !== 'idle') return;\r\n  provider.status = 'pending';\r\n  if (provider.type === 'hook') {\r\n    const hook = provider.origin as ProviderHook<unknown>;\r\n    const result = hook();\r\n    // 若result类型为对象，则将其合并到provider.value中，否则抛出错误\r\n    if (typeof result === 'object' && result !== null) {\r\n       Object.assign(provider.value, result);      \r\n    } else {\r\n      throw new Error('provider hook函数必须返回一个对象')\r\n    }\r\n    \r\n  } else {\r\n    throw new Error('暂不支持的provider类型')\r\n  }\r\n  provider.status = 'committed';\r\n  return provider.value;\r\n}","import { useContext } from \"react\";\r\nimport { ACTIVE_CACHE, ComponentInjector, ComponentProvider, ProviderHook, SERVICE_CONTEXT } from \"../../../domain/di\";\r\nimport { __runProvider } from \"./createComponent\";\r\n\r\ninterface ServiceOptions {\r\n\toptional?: boolean;\r\n\tskipOne?: boolean;\r\n}\r\n\r\nexport function useInjector<C>(input: ProviderHook<C> | symbol,): C;\r\nexport function useInjector<C>(input: ProviderHook<C> | symbol, options: ServiceOptions): C | null;\r\nexport function useInjector<C>(input: ProviderHook<C> | symbol, options?: ServiceOptions) {\r\n\tconst token = (typeof input === 'symbol' ? input : input.token) as unknown as symbol;\r\n\tlet depends: C;\r\n\tif (ACTIVE_CACHE.providers && ACTIVE_CACHE.providers.has(token)) {\r\n\t\tconst provider = ACTIVE_CACHE.providers.get(token) as ComponentProvider;\r\n\t\tdepends = provider.value as C;\r\n\t\tif(provider.status === 'idle') {\r\n\t\t\t__runProvider(provider);\r\n\t\t}\t\t\r\n\t\tif(provider.status === 'pending') {\r\n\t\t\tconsole.warn(`hook函数(${provider.origin.name})存在循环依赖，可能导致无法正常获取依赖值`)\r\n\t\t}\r\n\t} else {\r\n\t\tconst injector = useContext(SERVICE_CONTEXT);\r\n\t\tif(!injector) throw new Error('未找到注入器，请使用createComponent创建组件并通过provider参数提供对应依赖');\r\n\t\tdepends = findDepsByInjector(injector, token, options);\r\n\t}\r\n\tif (depends) {\r\n\t\treturn depends\r\n\t}\r\n\tif (options && options.optional === true) {\r\n\t\treturn null\r\n\t} else {\r\n\t\tthrow new Error(`未找到${token.description}的依赖值，请在上层Component中提供对应的providers`)\r\n\t}\r\n}\r\n\r\nfunction findDepsByInjector(node: ComponentInjector, token: symbol, options?: ServiceOptions): any {\r\n\tconst deps = node.providers.get(token)?.value;\r\n\tif (deps && !options?.skipOne) return deps;\r\n\tif (node.parent) return findDepsByInjector(node.parent, token);\r\n\tif (!node.parent) return null;\r\n}","import { Subject, Subscription, combineLatest, skip } from \"rxjs\";\r\nimport { Signal } from \"../../../domain/signal\";\r\n\r\nexport function __createEffectWatcher<T = unknown>(id: symbol, callback: (symbol?: symbol) => any, listener?: Subject<T>) {\r\n\tconst exit = EffectWatcher.EFFECT_WATCHER.find(watcher => watcher.id === id);\r\n\tif (exit) return exit\t\r\n\tconst watcher = new EffectWatcher({id, callback, listener});\r\n\treturn watcher;\r\n}\r\n\r\nexport function __findEffectWatcher(id?: symbol) {\r\n\tif (id) {\r\n\t\treturn EffectWatcher.EFFECT_WATCHER.find(watcher => watcher.id === id);\r\n\t} else {\r\n\t\treturn EffectWatcher.ACTIVE_WATCHER;\r\n\t}\r\n}\r\n\r\n\r\ninterface EffectWatcherConstructor {\r\n\tid: symbol;\r\n\tcallback: (symbol?: symbol) => any;\r\n\tlistener?: Subject<any>;\r\n}\r\nexport class EffectWatcher<T = unknown> {\r\n\tstatic EFFECT_WATCHER: EffectWatcher<any>[] = [];\r\n\tstatic ACTIVE_WATCHER: EffectWatcher<any> | null = null;\r\n\r\n\tid: symbol;\r\n\tprivate callback: (symbol?: symbol) => any;\r\n\tprivate signalArray: Signal<unknown>[] = [];\r\n\r\n\tprivate __listener?: Subject<T>;\r\n\tprivate __subscription: Subscription;\r\n\r\n\tconstructor({ id, callback, listener }: EffectWatcherConstructor) {\r\n\t\tthis.id = id;\r\n\t\tthis.callback = callback;\r\n\t\tEffectWatcher.EFFECT_WATCHER.push(this);\r\n\t\tEffectWatcher.ACTIVE_WATCHER = this;\r\n\t\tconst result = callback(id); //watcher实例创建完毕后默认执行回调函数，用于触发函数中的signal getter以便进行依赖注册\r\n\t\tEffectWatcher.ACTIVE_WATCHER = null; // 执行完毕后需要将activeWatcher置空\r\n\t\tif (listener) {\r\n\t\t\tthis.__listener = listener;\r\n\t\t\tthis.__listener.next(result);\r\n\t\t}\r\n\t}\r\n\r\n\tregisterSignal(signal: Signal<unknown>) {\r\n\t\tif (this.signalArray.includes(signal)) return;\r\n\t\tthis.signalArray.push(signal);\r\n\t}\r\n\r\n\tload() {\r\n\t\tconst observables = this.signalArray.map(signal => signal.observable);\r\n\t\tthis.__subscription = combineLatest(observables).pipe(skip(1)).subscribe(\r\n\t\t\t() => {\r\n\t\t\t\tconst res = this.callback(this.id);\r\n\t\t\t\tif (this.__listener) this.__listener.next(res);\r\n\t\t\t}\r\n\t\t);\r\n\t}\t\r\n\r\n\tunload() {\r\n\t\tconst index = EffectWatcher.EFFECT_WATCHER.findIndex(watcher => watcher.id === this.id);\r\n\t\tif (index > -1) EffectWatcher.EFFECT_WATCHER.splice(index, 1);\r\n\t\tthis.__subscription.unsubscribe();\r\n\t}\r\n}","import { useEffect } from \"react\";\r\n\r\nexport function useDestroy(callback: () => void) {\r\n  useEffect(() => {\r\n    return () => {\r\n      callback();\r\n    }\r\n  }, [])\r\n}","import { Subject, Subscription, combineLatest, skip } from \"rxjs\";\r\nimport { Signal } from \"../../../domain/signal\";\r\nimport { createContext } from \"react\";\r\n\r\nexport function __createRenderWatcher(id: symbol, callback: (symbol?: symbol) => any) {\r\n\tconst exit = RenderWatcher.RENDER_WATCHER.find(watcher => watcher.id === id);\r\n\tif (exit) {\r\n\t\tRenderWatcher.ACTIVE_WATCHER = exit;\r\n\t\treturn exit;\r\n\t};\r\n\tconst watcher = new RenderWatcher({id, callback});\r\n\treturn watcher;\r\n}\r\n\r\nexport function __findRenderWatcher(id?: symbol) {\r\n\tif (id) return RenderWatcher.RENDER_WATCHER.find(watcher => watcher.id === id);\t\r\n\tconst watcher = RenderWatcher.ACTIVE_WATCHER || RenderWatcher.RENDER_WATCHER[RenderWatcher.RENDER_WATCHER.length - 1];\r\n\treturn watcher;\t\r\n}\r\n\r\n\r\ninterface RenderWatcherConstructor {\r\n\tid: symbol;\r\n\tcallback: (symbol?: symbol) => any;\r\n}\r\nexport class RenderWatcher {\r\n\tstatic RENDER_WATCHER: RenderWatcher[] = [];\r\n\tstatic ACTIVE_WATCHER: RenderWatcher | null = null;\r\n\r\n\tid: symbol;\r\n\tprivate callback: (symbol?: symbol) => any;\r\n\tcontext: React.Context<any>;\r\n\tsignalArray: Signal<unknown>[] = [];\r\n\tprivate __subscription: Subscription;\r\n\r\n\tconstructor({ id, callback }: RenderWatcherConstructor) {\r\n\t\tthis.id = id;\r\n\t\tthis.callback = callback;\r\n\t\tRenderWatcher.RENDER_WATCHER.push(this);\r\n\t\tRenderWatcher.ACTIVE_WATCHER = this\r\n\t\tthis.context = createContext(this);\r\n\t}\r\n\r\n\tregisterSignal(signal: Signal<unknown>) {\r\n\t\tif (this.signalArray.includes(signal)) return;\r\n\t\tthis.signalArray.push(signal);\r\n\t}\r\n\r\n\tload() {\t\t\r\n\t\tconst observables = this.signalArray.map(signal => signal.observable);\r\n\t\tthis.__subscription = combineLatest(observables).pipe(skip(1)).subscribe(\r\n\t\t\t() => {\r\n\t\t\t\tthis.callback();\r\n\t\t\t}\r\n\t\t);\r\n\t\t//订阅后需要立即将当前watcher移除\r\n\t\tRenderWatcher.ACTIVE_WATCHER = null;\r\n\t\tconst index = RenderWatcher.RENDER_WATCHER.findIndex(watcher => watcher.id === this.id);\r\n\t\tif(index > -1) RenderWatcher.RENDER_WATCHER.splice(index, 1);\r\n\t}\r\n\r\n\tunload() {\r\n\t\tthis.__subscription.unsubscribe();\r\n\t}\r\n}","import { useEffect, useRef, useState } from \"react\";\r\nimport { BehaviorSubject } from \"rxjs\";\r\nimport { EffectReturn, SetSignal, Signal } from \"../../../domain/signal\";\r\nimport { __findEffectWatcher } from \"./watcher\";\r\nimport { useDestroy } from \"../../common/useDestroy\";\r\nimport { __findRenderWatcher } from \"../render/watcher\";\r\n\r\n/**\r\n * @function 创建一个可观察值\r\n * @description \r\n * - 内部基于rxjs的BehaviorSubject实现\r\n * - 返回可观察值的监听与变更方法，区别于useState，调用变更方法时不会触发函数组件重新调用\r\n * - 可在hook函数中替代原本使用useState的场景\r\n * @param initValue \r\n * @returns \r\n *  - getValue 用于获取实时值\r\n *  - setValue 用于设置值，可以传入一个新值或者一个函数，函数接受旧值并返回新值\r\n * @example \r\n * const [getValue, setValue] = useSignal(0);\r\n * cont count = getValue.useState(); \r\n * useEffect(() => {\r\n *  setTimeout(() => {\r\n *    setValue(value => value + 1);\r\n *  }, 1000)\r\n * }, [setValue])\r\n * return <div>{count}</div>\r\n */\r\nexport function useSignal<T>(initValue: T): [Signal<T>, SetSignal<T>] {\r\n  const subject   = useRef( new BehaviorSubject<T>(initValue) );   \r\n  const getValue  = useRef(getValueFunc);\r\n  const setValue  = useRef(setValueFunc);\r\n\r\n  useDestroy(() => {    \r\n    subject.current?.complete();\r\n  })\r\n  \r\n  function getValueFunc(symbol?: symbol) {\r\n    //获取effectWatcher，将当前的signal注册到watcher中\r\n    const effectWatcher = __findEffectWatcher(symbol);\r\n    effectWatcher?.registerSignal(getValue.current);    \r\n    \r\n    //获取renderWatcher，将当前的signal注册到watcher中\r\n    const renderWathcer = __findRenderWatcher(symbol);\r\n    if(renderWathcer) renderWathcer.registerSignal(getValue.current);\r\n\r\n    return subject.current.getValue();  \r\n  }\r\n  getValueFunc.observable = subject.current.asObservable();\r\n  getValueFunc.useState = function() {\r\n    const [state, setState] = useState(subject.current.getValue());\r\n    useEffect(() => {\r\n      const subscription = subject.current.subscribe(setState);\r\n      return () => {\r\n        subscription.unsubscribe();\r\n      };\r\n    }, []);\r\n    return state;\r\n  }\r\n  getValueFunc.watchEffect = function(callback: (value: T) => EffectReturn) {    \r\n    useEffect(() => {\r\n      let effectReturn: EffectReturn;\r\n      const subscription = subject.current.subscribe(\r\n        value => {\r\n          effectReturn = callback(value);\r\n          if(effectReturn instanceof Function) effectReturn();\r\n        }\r\n      );\r\n      return () => {          \r\n        subscription.unsubscribe();\r\n      };\r\n    }, []);\r\n  }  \r\n\r\n  function setValueFunc(newValue: T | ((oldVal: T) => T)) {\r\n    if (newValue instanceof Function) {\r\n      subject.current.next(newValue(subject.current.getValue()));\r\n    } else {\r\n      subject.current.next(newValue);\r\n    }\r\n  } \r\n\r\n  return [getValue.current, setValue.current] as const;\r\n}\r\n\r\n","import React, { memo, ReactNode, useEffect, useState } from \"react\";\r\nimport { Signal } from \"../../../domain/signal\";\r\nimport { useSymbol } from \"../../common/useSymbol\";\r\nimport { __createRenderWatcher } from \"./watcher\";\r\n\r\ninterface RenderProps<T> {\r\n  target: Signal<T>;\r\n  children: (value: T) => ReactNode;\r\n  placeholder?: () => ReactNode;\r\n  debug?: boolean;\r\n}\r\n\r\nexport const Render = memo(\r\n  (props: {children: (id?: symbol) => ReactNode;}) => {\r\n    const { children } = props;\r\n    const id = useSymbol();  \r\n    const [_trigger, setTrigger] = useState(0);\r\n    const handler = () => {\r\n      setTrigger(v => v + 1)\t\r\n    }\r\n    \r\n    const watcherRef = __createRenderWatcher(id, handler); \r\n  \r\n    useEffect(() => {\t\t\r\n      watcherRef.load();\r\n      return () => watcherRef.unload()\r\n    })\r\n    \r\n    return children(id)  \r\n  }\r\n)\r\n\r\nexport function render(nodeFn: (id?: symbol) => ReactNode, options?: {debug?: boolean}) {\r\n  return <Render>{nodeFn}</Render>\r\n}\r\n\r\nfunction SingleRender<T>(props: RenderProps<T>) {\r\n  const { target, children, placeholder } = props;\r\n  const value = target.useState();\r\n  return (isNullOrUndefined(value) && placeholder) ? placeholder() : children(value);\r\n}\r\n\r\nfunction _singRender<T>(target: Signal<T>, map?: (value: T) => ReactNode, placeholder?: () => ReactNode) {\r\n  const renderValue = (_value: T, _map?: (value: T) => ReactNode) => {\r\n    const result = _map ? _map(_value) : _value;\r\n    if (!isValidReactNode(result) && typeof result === \"object\" && result !== null) {\r\n      console.warn(\"render方法无法直接渲染引用类型，已自动转化为json字符串\", _value);\r\n      return JSON.stringify(result) as string;\r\n    } else {\r\n      return result as ReactNode;\r\n    }\r\n  }\r\n\r\n  return <SingleRender target={target} children={x => renderValue(x, map)} placeholder={placeholder} />;\r\n}\r\n\r\nexport const $ = _singRender;\r\n\r\n// 判断输入值是否为合法的ReactNode\r\nfunction isValidReactNode(value: any): value is ReactNode {\r\n  if(Array.isArray(value)) {\r\n    return value.every(React.isValidElement);\r\n  }\r\n  return React.isValidElement(value);\r\n}\r\n\r\nfunction isNullOrUndefined(value: any): value is null | undefined {\r\n  return value === null || value === undefined;\r\n}","import { useRef } from \"react\";\r\n\r\nexport function useReady(callback: () => void) {\r\n  const hasLoaded = useRef(false);\r\n\r\n  if (!hasLoaded.current) {\r\n    callback();\r\n    hasLoaded.current = true;\r\n  }\r\n}","import { useEffect, useRef, useState } from \"react\";\r\nimport { BehaviorSubject } from \"rxjs\";\r\nimport { EffectReturn, Signal } from \"../../../domain/signal\";\r\nimport { __createEffectWatcher, __findEffectWatcher, EffectWatcher } from \"./watcher\";\r\nimport { useSymbol } from \"../../common/useSymbol\";\r\nimport { useDestroy } from \"../../common/useDestroy\";\r\nimport { __findRenderWatcher } from \"../render/watcher\";\r\nimport { useReady } from \"../../common/useReady\";\r\n\r\nexport function useComputed<T>(inputFn: (symbol?: symbol) => T): Signal<T | null> {\r\n  const subject   = useRef( new BehaviorSubject<T | null>(null));  \r\n\tconst getValue  = useRef(getValueFunc);\r\n\r\n  useDestroy(() => {\r\n    subject.current?.complete();\r\n  })\r\n\t\r\n  function getValueFunc(symbol?: symbol) {\r\n    //获取effectWatcher，将当前的signal注册到watcher中\r\n    const watcher = __findEffectWatcher(symbol);\r\n    watcher?.registerSignal(getValue.current);     \r\n\r\n    //获取renderWatcher，将当前的signal注册到watcher中\r\n    const renderWathcer = __findRenderWatcher(symbol);\r\n    if(renderWathcer) renderWathcer.registerSignal(getValue.current);\r\n     \r\n    return subject.current.getValue();  \r\n  }\r\n  getValueFunc.observable = subject.current.asObservable();\r\n  getValueFunc.useState = function() {\r\n    const [state, setState] = useState(subject.current.getValue());\r\n    useEffect(() => {\r\n      const subscription = subject.current.subscribe(setState);\r\n      return () => {\r\n        subscription.unsubscribe();\r\n      };\r\n    }, []);\r\n    return state;\r\n  }\r\n  getValueFunc.watchEffect = function(callback: (value: T | null) => EffectReturn) {    \r\n    useEffect(() => {\r\n      let effectReturn: EffectReturn;\r\n      const subscription = subject.current.subscribe(\r\n        value => {\r\n          effectReturn = callback(value);\r\n          if(effectReturn instanceof Function) effectReturn();\r\n        }\r\n      );\r\n      return () => {          \r\n        subscription.unsubscribe();\r\n      };\r\n    }, []);\r\n  }  \r\n\t\r\n\tconst id = useSymbol();   \r\n\tconst watcher = useRef<EffectWatcher<T | null>>();\r\n\tuseReady(() => {\r\n\t\twatcher.current = __createEffectWatcher(id, inputFn, subject.current) as EffectWatcher<T | null>;\r\n\t\twatcher.current.load();\r\n\t})\r\n\r\n\tuseDestroy(() => {\r\n\t\twatcher.current?.unload();\r\n\t})\r\n\r\n\treturn getValue.current;\r\n}","import { useRef } from \"react\";\r\nimport { useSymbol } from \"../../common/useSymbol\";\r\nimport { useReady } from \"../../common/useReady\";\r\nimport { EffectWatcher, __createEffectWatcher } from \"./watcher\";\r\nimport { useDestroy } from \"../../common/useDestroy\";\r\n\r\nexport function useWatchEffect(callback: (symbol?: symbol) => void) {\r\n\tconst id = useSymbol();   \r\n\tconst watcher = useRef<EffectWatcher>()\r\n\r\n\tuseReady(() => {\r\n\t\twatcher.current = __createEffectWatcher(id, callback);\r\n\t\twatcher.current?.load();\r\n\t})\r\n\r\n\tuseDestroy(() => {\r\n\t\twatcher.current?.unload();\r\n\t})\t\r\n}","import { useState } from \"react\";\r\n\r\n/**\r\n * @description 使用引用类型的状态变量，并返回状态值和状态变更函数\r\n * @param refState \r\n * @returns \r\n */\r\nexport function useRefState<T extends object>(refState: T): [T, (v: Partial<T>) => void] {\r\n  const [state, setState] = useState(refState);\r\n\r\n  const setRefState = (newV: Partial<T>) => {\r\n    setState(oldV => ({ ...oldV, ...newV }));\r\n  }\r\n\r\n  return [state, setRefState]\r\n}","import { useEffect } from \"react\";\r\n\r\nexport function useMounted(callback: React.EffectCallback) {\r\n\tuseEffect(() => {\r\n\t\tconst fn = callback();\t\t\r\n\t\treturn () => {\r\n\t\t\tif (typeof fn === \"function\")fn();\t\t\r\n\t\t}\r\n\t}, []);\r\n}","\r\n/** http拦截器函数 */\r\nexport interface HttpIntercept {\r\n  /** http请求拦截器 */\r\n  requestIntercept?: (request: Partial<RequestOptions>) => Promise<RequestOptions>;\r\n  /** http响应拦截器 */\r\n  responseIntercept?: (res: any) => Promise<any>;\r\n}\r\n\r\n/** 自定义http请求函数 */\r\nexport interface RequesterFunc {\r\n  (input: string, opt?: RequestOptions): Promise<Record<string, any>>;\r\n}\r\n \r\n/** 请求配置项 */\r\nexport interface RequestOptions {\r\n  url: string;\r\n  method: 'GET' | 'POST' | 'PUT' | 'HEAD' | 'DELETE';\r\n  reqData: any;\r\n  auto?: boolean;  \r\n  headers: any;\r\n  defaultValue?: any;\r\n  [prop: string]: any;\r\n}\r\n\r\n/** http请求状态 */\r\nexport type HttpState = 'ready' | 'pending' | 'refreshing' | 'success' | 'failed';\r\n\r\n/** HTTP拦截器token */\r\nexport const HTTP_INTERCEPT = Symbol('供useHttp使用的请求拦截器');\r\n\r\n/** 自定义HTTP函数token */\r\nexport const CUSTOME_REQUEST = Symbol('自定义请求函数，以覆盖默认的fetch函数');\r\n\r\n/** Paging分页请求配置 */\r\nexport interface PagingSetting<T = any> {\r\n  start: 0 | 1;\r\n  size: number;\r\n  sizeKey: string;\r\n  indexKey: string;\r\n  method: 'GET' | 'POST';\r\n  scrollLoading: boolean;\r\n  dataPlucker: (res: any) => T[];\r\n  totalPlucker: (res: any) => number;\r\n}\r\n\r\n/** 分页请求状态） */\r\nexport type PagingState = 'empty' | 'unfulled' | 'fulled' | 'refreshing' | 'loading';\r\n\r\n/** Paging分页请求token */\r\nexport const PAGING_SETTING = Symbol('提供全局分页配置');","import { useMemo, useState } from \"react\";\r\nimport { CUSTOME_REQUEST, HttpIntercept, HttpState, HTTP_INTERCEPT, RequesterFunc, RequestOptions } from \"../../domain/http\";\r\nimport { useReady } from \"../common/useReady\";\r\nimport { useInjector } from \"../core/di/useInjector\";\r\n\r\n/**\r\n * @deprecated useHttp方法即将废弃，请改用useHttpClient\r\n * @description ajax请求，默认通过fetch发送请求，可通过di依赖注入方式提供自定义请求方法\r\n * @param url 请求地址，必传\r\n * @param localOptions 请求配置项 选传\r\n * @returns  [请求结果, 请求方法, 请求状态, 错误信息]\r\n */\r\nexport function useHttp<T>(\r\n  url: string, localOptions: Partial<RequestOptions> = {}\r\n): [T | undefined, (query?: any) => Promise<void | T>, HttpState, any] {\r\n\r\n  const DEFAULT_HTTP_OPTIONS: Partial<RequestOptions> = {\r\n    auto: false,\r\n    method: 'GET',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    reqData: {}\r\n  }\r\n\r\n  /** 设置请求配置以及上层组件注入进来的配置项 */\r\n  const options       = useMemo(() => Object.assign(Object.create(DEFAULT_HTTP_OPTIONS), localOptions, { url }), [localOptions, url]);\r\n  const intercept     = useInjector<HttpIntercept>(HTTP_INTERCEPT, {optional: true});\r\n  const customeReq    = useInjector<{req: RequesterFunc}>(CUSTOME_REQUEST, {optional: true});\r\n\r\n  /** 定义http请求的相关状态变量 */\r\n  const [res, setRes]        = useState<T>(options.defaultValue as T);\r\n  const [err, setErr]        = useState<any>();\r\n  const [state, setState]    = useState<HttpState>('ready');  \r\n\r\n  const request =  (query: any = {}) => {\r\n    setState('pending');\r\n    return new Promise<RequestOptions>(resolve => {\r\n      if(intercept?.requestIntercept) {        \r\n        intercept.requestIntercept({ ...options, reqData: query }).then(finalOptions => resolve(finalOptions))\r\n      } else {\r\n        resolve({ ...options, reqData: query })\r\n      } \r\n    })\r\n    .then(options2 => {\r\n      let reqData = options2.reqData;\r\n      if(customeReq) {\r\n        return customeReq.req(options2.url, {...options2, reqData})\r\n      } else {\r\n        if(['GET', 'HEAD'].includes(options2.method) || !options2.method) {\r\n          const searchKeys = `?${objectToUrlSearch(reqData)}`;\r\n          options2.url += searchKeys;  \r\n          delete options2.body;\r\n        } else {\r\n          options2.body = reqData instanceof FormData ? reqData : JSON.stringify(reqData);\r\n          delete options2.reqData;\r\n        }\r\n        return fetch(options2.url, options2)\r\n      }\r\n    })\r\n    .then(response => {\r\n      const res = response;\r\n      const resIntercept = intercept?.responseIntercept\r\n      if(customeReq) {\r\n        return resIntercept ? resIntercept(res) : res;\r\n      } else {\r\n        return res.json().then((re: any) => resIntercept ? resIntercept(re) : re)\r\n      }\r\n    })\r\n    .then(res => {\r\n      setRes(res);\r\n      setState('success');\r\n      return res as T;\r\n    })\r\n    .catch(err => {      \r\n      setState('failed');\r\n      setErr(err);\r\n      throw new Error(err);\r\n    })\r\n  }  \r\n\r\n  useReady(() => {\r\n    if(options.auto) request(options.reqData)\r\n  })\r\n\r\n  return [res, request, state, err]\r\n} \r\n\r\nfunction objectToUrlSearch(obj: object) {\r\n  console.log(obj)\r\n  if(!obj) return '';\r\n  let str = '';\r\n  for(let key in obj) {\r\n    str += `${key}=${obj[key]}&`\r\n  }\r\n  return str\r\n}\r\n\r\n","import { useRef } from \"react\";\r\nimport { CUSTOME_REQUEST, HttpIntercept, HttpState, HTTP_INTERCEPT, RequesterFunc, RequestOptions } from \"../../domain/http\";\r\nimport { useReady } from \"../common/useReady\";\r\nimport { useSignal } from \"../core/signal/useSignal\";\r\nimport { useInjector } from \"../core/di/useInjector\";\r\n\r\n/**\r\n * @description ajax请求，默认通过fetch发送请求，可通过di依赖注入方式提供自定义请求方法\r\n * @param url 请求地址，必传\r\n * @param localOptions 请求配置项 选传\r\n * @returns  [请求结果, 请求方法, 请求状态, 错误信息]\r\n */\r\nexport function useHttpClient<T>(\r\n  url: string, localOptions: Partial<RequestOptions> = {}\r\n) {\r\n\r\n  const DEFAULT_HTTP_OPTIONS: Partial<RequestOptions> = {\r\n    auto: false,\r\n    method: 'GET',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    reqData: {}\r\n  }\r\n\r\n  /** 设置请求配置以及上层组件注入进来的配置项 */\r\n  const options       = Object.assign(Object.create(DEFAULT_HTTP_OPTIONS), localOptions, { url });\r\n  const intercept     = useInjector<HttpIntercept>(HTTP_INTERCEPT, {optional: true});\r\n  const customeReq    = useInjector<{req: RequesterFunc}>(CUSTOME_REQUEST, {optional: true});\r\n\r\n  /** 定义http请求的相关状态变量 */\r\n  const [res, setRes]        = useSignal<T>(options.defaultValue as T);\r\n  const [err, setErr]        = useSignal<Error | null>(null);\r\n  const [state, setState]    = useSignal<HttpState>('ready');  \r\n\r\n  const request =  useRef(\r\n    (query: any = {}) => {\r\n      setState('pending');\r\n      return new Promise<RequestOptions>(resolve => {\r\n        if(intercept?.requestIntercept) {        \r\n          intercept.requestIntercept({ ...options, reqData: query }).then(finalOptions => resolve(finalOptions))\r\n        } else {\r\n          resolve({ ...options, reqData: query })\r\n        } \r\n      })\r\n      .then(options2 => {\r\n        let reqData = options2.reqData;\r\n        if(customeReq) {\r\n          return customeReq.req(options2.url, {...options2, reqData})\r\n        } else {\r\n          if(['GET', 'HEAD'].includes(options2.method) || !options2.method) {\r\n            const searchKeys = `?${objectToUrlSearch(reqData)}`;\r\n            options2.url += searchKeys;  \r\n            delete options2.body;\r\n          } else {\r\n            options2.body = reqData instanceof FormData ? reqData : JSON.stringify(reqData);\r\n            delete options2.reqData;\r\n          }\r\n          return fetch(options2.url, options2)\r\n        }\r\n      })\r\n      .then(response => {\r\n        const res = response;\r\n        const resIntercept = intercept?.responseIntercept\r\n        if(customeReq) {\r\n          return resIntercept ? resIntercept(res) : res;\r\n        } else {\r\n          return res.json().then((re: any) => resIntercept ? resIntercept(re) : re)\r\n        }\r\n      })\r\n      .then(res => {\r\n        setRes(res);\r\n        setState('success');\r\n        return res as T;\r\n      })\r\n      .catch(err => {      \r\n        setState('failed');\r\n        setErr(err);\r\n        throw new Error(err);\r\n      })\r\n    }  \r\n  )\r\n\r\n  useReady(() => {\r\n    if(options.auto) request.current(options.reqData)\r\n  })\r\n\r\n  return [res, request.current, state, err] as const\r\n} \r\n\r\nfunction objectToUrlSearch(obj: object) {\r\n  console.log(obj)\r\n  if(!obj) return '';\r\n  let str = '';\r\n  for(let key in obj) {\r\n    str += `${key}=${obj[key]}&`\r\n  }\r\n  return str\r\n}","import { useRef} from \"react\";\r\nimport { PagingSetting, PagingState, PAGING_SETTING, RequestOptions } from \"../../domain/http\";\r\nimport { useHttpClient } from \"./useHttpClient\";\r\nimport { useSignal } from \"../core/signal/useSignal\";\r\nimport { useReady } from \"../common/useReady\";\r\nimport { useComputed } from \"../core/signal/useComputed\";\r\nimport { Signal } from \"../../domain/signal\";\r\nimport { useInjector } from \"../core/di/useInjector\";\r\n\r\ninterface PagingAction {\r\n  /** 刷新请求(分页重置，清除原有请求的查询参数querys)  */\r\n  fresh: (querys: object) => void;\r\n  /** 刷新请求(分页重置，保留每次请求的查询参数querys) */\r\n  refresh: (querys: object) => void;\r\n  /** 重置请求(分页重置，清除历史查询参数querys，但保留初次调用时的querys) */\r\n  reset: () => void;\r\n  /** 请求下一页数据 */\r\n  nextPage: () => void;\r\n}\r\n\r\ninterface Page {\r\n  target: number;\r\n  __index: number;\r\n  __size: number;\r\n  total: number;\r\n  [prop: string]: number;\r\n}\r\n\r\nconst LocalPagingSetting: Partial<PagingSetting> = {\r\n  method: 'POST',\r\n  sizeKey: 'pageSize',\r\n  indexKey: 'pageNo',\r\n  size: 10,\r\n  start: 1,\r\n  scrollLoading: true,\r\n  dataPlucker: res => res.data,\r\n  totalPlucker: res => res?.total || 0\r\n}\r\n\r\nexport function usePaging<T>(\r\n  url: string,\r\n  querys: object = {},\r\n  localSetting: Partial<PagingSetting & RequestOptions>  = {}\r\n) {\r\n\r\n  /** 初始化分页请求配置 */\r\n  const globalSetting = useInjector<PagingSetting>(PAGING_SETTING, {optional: true});\r\n  const setting = {...LocalPagingSetting, ...(globalSetting || {}), ...localSetting} as PagingSetting & RequestOptions;  \r\n\r\n  /** 初始化条件查询对象 */\r\n  const querysRef = useRef(querys);\r\n\r\n  /** 初始化分页信息 */\r\n  const pageRef = useRef<Page>({} as Page);\r\n\r\n  useReady(() => {\r\n    pageRef.current.target                 = setting.start;\r\n    pageRef.current[setting['indexKey']]   = setting.start;\r\n    pageRef.current[setting['sizeKey']]    = setting.size;\r\n\r\n    !pageRef.current.hasOwnProperty('__index') && \r\n    Object.defineProperty(pageRef.current, '__index', {\r\n      get: () => pageRef.current[setting['indexKey']],\r\n      set: (num: number) => { pageRef.current[setting['indexKey']] = num }\r\n    });\r\n    !pageRef.current.hasOwnProperty('__size') && \r\n    Object.defineProperty(pageRef.current, '__size', {\r\n      get: () => pageRef.current[setting['sizeKey']]\r\n    });\r\n  })\r\n\r\n  /** 定义分页请求逻辑 */\r\n  const [, request, httpState ] = useHttpClient<T>(url, {...setting, auto: false});\r\n  const [currentPagingData, setCurrentPagingData] = useSignal<T[]>([]);\r\n\r\n  const loadData = () => {\r\n    if (httpState() === 'pending') return;    \r\n    return request({ ...querysRef.current, [setting['indexKey']]: pageRef.current.target, [setting['sizeKey']]: pageRef.current.__size })\r\n      .then(res => {\r\n        if(!res) return;\r\n        pageRef.current.total = setting.totalPlucker(res);\r\n        const list = setting.dataPlucker(res) as T[];\r\n        if(pageRef.current.target === setting.start || !setting.scrollLoading) {\r\n          setCurrentPagingData(list);\r\n        } else {\r\n          setCurrentPagingData(val => val.concat(list));\r\n        }\r\n      })\r\n  }\r\n\r\n  const fresh = (param = {}) => {\r\n    querysRef.current = { ...querys, ...param };\r\n    pageRef.current.target = setting.start;\r\n    loadData();\r\n  }\r\n\r\n  const refresh = (param = {}) => {\r\n    querysRef.current = { ...querys, ...querysRef.current, ...param };\r\n    pageRef.current.target = setting.start;\r\n    loadData();\r\n  }\r\n\r\n  const reset = () => {\r\n    querysRef.current = querys;\r\n    pageRef.current.target = setting.start;\r\n    loadData();\r\n  }\r\n\r\n  const nextPage = () => {    \r\n    if (pagingState() === 'fulled') return;\r\n    pageRef.current.target = pageRef.current.__index + 1;\r\n    loadData();\r\n  }    \r\n\r\n  useReady(() => {\r\n    if(setting.auto) loadData();\r\n  })  \r\n\r\n  httpState.watchEffect(val => {\r\n    if(val === 'success') {\r\n      pageRef.current.__index = pageRef.current.target;\r\n    }\r\n  })  \r\n  \r\n  /** 根据请求结果设置分页请求状态 */\r\n  const pagingState: Signal<PagingState | null> = useComputed(() => {\r\n    const dataLen = currentPagingData()?.length || 0;\r\n    switch(httpState()) {\r\n      default:\r\n        return 'refreshing';\r\n      case 'pending':\r\n        if(pageRef.current.target === setting.start) {\r\n          return 'refreshing';\r\n        } else {\r\n          return 'loading'\r\n        }\r\n      case 'success':\r\n        if(pageRef.current.target === setting.start && !dataLen) return 'empty';\r\n        if(dataLen < pageRef.current.__size) return 'fulled';\r\n        if(dataLen >= pageRef.current.total) return 'fulled';\r\n        return 'unfulled';\r\n    }\r\n  })  \r\n\r\n  return [    \r\n    currentPagingData,\r\n    { fresh, refresh, reset, nextPage },    \r\n    {pagingState, httpState, pageInfo: pageRef.current}\r\n  ] as const\r\n}\r\n"],"names":["objectToUrlSearch"],"mappings":"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"}